# ğŸ« Event Planner - Ticket Generator Service Environment Configuration
#
# ğŸ“‹ GUIDE D'UTILISATION :
# 1. Copier ce fichier en .env.local pour le dÃ©veloppement
# 2. Copier ce fichier en .env pour la production
# 3. Remplacer les valeurs par dÃ©faut par vos vraies clÃ©s
# 4. NE JAMAIS COMMITTER le fichier .env contenant des secrets !

# ===========================================
# ğŸš€ SERVEUR & ENVIRONNEMENT
# ===========================================
PORT=3004
# ğŸ¯ Port d'Ã©coute du service (doit Ãªtre unique par service)
NODE_ENV=development
# ğŸŒ Environnement : development | staging | production

# ===========================================
# ğŸ—„ï¸ BASE DE DONNÃ‰ES POSTGRESQL
# ===========================================
DB_HOST=localhost
# ğŸ  HÃ´te de la base de donnÃ©es (localhost en dev, RDS endpoint en prod)
DB_PORT=5432
# ğŸšª Port PostgreSQL (5432 par dÃ©faut)
DB_NAME=event_planner_ticket_generator
# ğŸ“Š Nom de la base de donnÃ©es (prÃ©fixe event_planner_ recommandÃ©)
DB_USER=postgres
# ğŸ‘¤ Utilisateur PostgreSQL (crÃ©er un utilisateur dÃ©diÃ© en prod)
DB_PASSWORD=postgres
# ğŸ” Mot de passe PostgreSQL (utiliser un mot de passe fort en prod)
DB_SSL=false
# ğŸ”’ Connexion SSL (true en production avec RDS)

# Pool de connexions pour optimiser les performances
DB_POOL_MIN=2
# ğŸ”¢ Nombre minimum de connexions dans le pool
DB_POOL_MAX=20
# ğŸ”¢ Nombre maximum de connexions dans le pool
DB_POOL_IDLE_TIMEOUT=30000
# â° Timeout d'inactivitÃ© des connexions (ms)
DB_CONNECTION_TIMEOUT=2000
# â° Timeout de connexion (ms)

# Bootstrap automatique de la base de donnÃ©es
# âš ï¸  DÃ‰SACTIVÃ‰ PAR DÃ‰FAUT EN PRODUCTION POUR SÃ‰CURITÃ‰
# âœ… true : CrÃ©e automatiquement les tables et index au dÃ©marrage
# âŒ false : NÃ©cessite une migration manuelle en production
DB_AUTO_BOOTSTRAP=false

# ===========================================
# ğŸ” QR CODE CONFIGURATION
# ===========================================
# ClÃ© pour signature cryptographique des QR codes
# âš ï¸ IMPORTANT: Utiliser une clÃ© sÃ©curisÃ©e en production
# ğŸ”‘ GÃ©nÃ©rer : openssl rand -base64 32
QR_SECRET_KEY=ticket-qr-secret-key-2026
# ğŸ” ClÃ© secrÃ¨te pour signer les QR codes (anti-fraude)

# Configuration QR code avancÃ©e
QR_ALGORITHM=HS256
# ğŸ› ï¸ Algorithme de signature pour QR codes (HS256 recommandÃ©)
QR_EXPIRY_HOURS=24
# â° DurÃ©e de validitÃ© des QR codes (heures)
QR_MAX_VALIDITY=86400
# â° DurÃ©e maximale de validitÃ© en secondes (86400 = 24h)
QR_MAX_SIZE=4096
# ğŸ“ Taille maximale du QR code en octets

# ===========================================
# ğŸŒ INTER-SERVICES COMMUNICATION
# ===========================================
# Token partagÃ© pour communication entre services
# ğŸ”‘ GÃ©nÃ©rer : openssl rand -base64 32 (doit Ãªtre identique partout)
SHARED_SERVICE_TOKEN=shared-service-token-abcdef12345678901234567890
# ğŸ” Token pour authentifier les communications inter-services

# URLs des autres services (pour health checks et communication)
AUTH_SERVICE_URL=http://localhost:3000
# ğŸ” URL du service d'authentification
CORE_SERVICE_URL=http://localhost:3001
# ğŸ¯ URL du service principal
NOTIFICATION_SERVICE_URL=http://localhost:3002
# ğŸ“§ URL du service de notifications
PAYMENT_SERVICE_URL=http://localhost:3003
# ğŸ’³ URL du service de paiements
SCAN_VALIDATION_SERVICE_URL=http://localhost:3005
# ğŸ” URL du service de validation

# Timeout pour les appels HTTP inter-services
INTER_SERVICE_TIMEOUT=30000
# â° Timeout par dÃ©faut (30000ms = 30 secondes)
INTER_SERVICE_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry
INTER_SERVICE_RETRY_DELAY=1000
# â° DÃ©lai entre les retries (1000ms = 1 seconde)

# ===========================================
# ğŸ’¾ CACHE REDIS
# ===========================================
REDIS_HOST=localhost
# ğŸ  HÃ´te Redis (localhost en dev, ElastiCache endpoint en prod)
REDIS_PORT=6379
# ğŸšª Port Redis (6379 par dÃ©faut)
REDIS_PASSWORD=
# ğŸ” Mot de passe Redis (optionnel en dev, requis en prod)
REDIS_DB=4
# ğŸ“Š NumÃ©ro de la base Redis (4 pour Ticket Generator Service)

# Configuration du cache
CACHE_TTL=3600
# â° DurÃ©e de vie du cache en secondes (3600 = 1 heure)
CACHE_MAX_KEYS=10000
# ğŸ”¢ Nombre maximum de clÃ©s en cache

# ===========================================
# ğŸ“„ PDF GENERATION CONFIGURATION
# ===========================================
PDF_TEMPLATE_DIR=./templates
# ğŸ“ RÃ©pertoire des templates PDF
PDF_OUTPUT_DIR=./generated
# ğŸ“ RÃ©pertoire de sortie des PDF gÃ©nÃ©rÃ©s
PDF_MAX_BATCH_SIZE=100
# ğŸ”¢ Nombre maximum de tickets gÃ©nÃ©rÃ©s en batch

# Options PDF par dÃ©faut
PDF_DEFAULT_FORMAT=A4
# ğŸ“„ Format PDF par dÃ©faut (A4, A3, Letter)
PDF_DEFAULT_ORIENTATION=portrait
# ğŸ“ Orientation par dÃ©faut (portrait, landscape)
PDF_DEFAULT_MARGIN=20
# ğŸ“ Marge par dÃ©faut en millimÃ¨tres
PDF_QUALITY=high
# ğŸ¨ QualitÃ© PDF (low, medium, high)

# Configuration avancÃ©e PDF
PDF_COMPRESSION=true
# ğŸ—œï¸ Activer la compression PDF
PDF_PASSWORD_PROTECTED=false
# ğŸ” ProtÃ©ger les PDF avec mot de passe
PDF_WATERMARK_ENABLED=false
# ğŸŒŠ Activer le filigrane sur les PDF

# ===========================================
# ğŸ« QR CODE TECHNICAL CONFIGURATION
# ===========================================
QR_CODE_SIZE=300
# ğŸ“ Taille du QR code en pixels
QR_ERROR_CORRECTION=M
# ğŸ› ï¸ Niveau de correction d'erreur (L, M, Q, H)
QR_MARGIN=4
# ğŸ“ Marge du QR code (pixels)
QR_FOREGROUND_COLOR=000000
# ğŸ¨ Couleur de premier plan (hexadÃ©cimal)
QR_BACKGROUND_COLOR=FFFFFF
# ğŸ¨ Couleur de fond (hexadÃ©cimal)

# Options avancÃ©es QR code
QR_LOGO_ENABLED=false
# ğŸ–¼ï¸ Activer l'insertion de logo dans QR code
QR_LOGO_PATH=./assets/logo.png
# ğŸ–¼ï¸ Chemin du logo pour QR code
QR_CUSTOM_DATA_ENABLED=true
# ğŸ“Š Activer les donnÃ©es personnalisÃ©es dans QR code

# ===========================================
# ğŸ“ STORAGE CONFIGURATION
# ===========================================
TICKETS_STORAGE_PATH=./tickets
# ğŸ“ Chemin de stockage des tickets gÃ©nÃ©rÃ©s
TEMP_PATH=./temp
# ğŸ“ Chemin des fichiers temporaires
MAX_FILE_SIZE=5MB
# ğŸ“ Taille maximale des fichiers (5MB par dÃ©faut)
CLEANUP_TEMP_FILES_HOURS=1
# ğŸ—‘ï¸ Nettoyer les fichiers temporaires aprÃ¨s (heures)

# Configuration du stockage cloud (optionnel)
ENABLE_CLOUD_STORAGE=false
# â˜ï¸ Activer le stockage cloud (AWS S3, Google Cloud, etc.)
CLOUD_STORAGE_PROVIDER=aws
# â˜ï¸ Fournisseur cloud (aws, gcp, azure)
CLOUD_STORAGE_BUCKET=event-planner-tickets
# ğŸ“¦ Nom du bucket de stockage

# ===========================================
# âš¡ PERFORMANCE & RATE LIMITING
# ===========================================
# Rate limiting technique
RATE_LIMIT_WINDOW_MS=900000
# â° FenÃªtre de temps pour le rate limiting (900000ms = 15 minutes)
RATE_LIMIT_MAX_REQUESTS=1000
# ğŸ”¢ Nombre max de requÃªtes par fenÃªtre (global)

# Concurrency settings
MAX_CONCURRENT_GENERATIONS=10
# ğŸ”¢ Nombre maximum de gÃ©nÃ©rations simultanÃ©es
GENERATION_TIMEOUT=30000
# â° Timeout pour la gÃ©nÃ©ration d'un ticket (30 secondes)
BATCH_PROCESSING_DELAY=100
# â° DÃ©lai entre les traitements batch (100ms)

# Configuration mÃ©moire
MAX_MEMORY_USAGE=512mb
# ğŸ§  Utilisation mÃ©moire maximale (512MB par dÃ©faut)
TEMP_DIR_MAX_SIZE=1gb
# ğŸ“ Taille maximale du rÃ©pertoire temporaire

# ===========================================
# ğŸ—‚ï¸ NETTOYAGE AUTOMATIQUE
# ===========================================
CLEANUP_ENABLED=true
# âœ… Activer le nettoyage automatique
CLEANUP_INTERVAL=86400000
# â° Intervalle de nettoyage (86400000ms = 24 heures)
CLEANUP_RETENTION_DAYS=30
# ğŸ“… DurÃ©e de rÃ©tention des fichiers (jours)
TEMP_FILE_CLEANUP_DELAY=3600000
# â° DÃ©lai avant nettoyage des fichiers temporaires (3600000ms = 1 heure)

# ===========================================
# ğŸ¨ TEMPLATES CONFIGURATION
# ===========================================
TEMPLATES_PATH=./templates
# ğŸ“ Chemin des templates de tickets
DEFAULT_TEMPLATE=standard
# ğŸ­ Template par dÃ©faut pour les tickets
CUSTOM_TEMPLATES_ENABLED=true
# âœ… Activer les templates personnalisÃ©s

# Types de templates supportÃ©s
SUPPORTED_TEMPLATE_FORMATS=html,pug,handlebars
# ğŸ“„ Formats de templates supportÃ©s
TEMPLATE_CACHE_ENABLED=true
# ğŸ—„ï¸ Activer le cache des templates
TEMPLATE_VALIDATION_ENABLED=true
# âœ… Valider les templates avant utilisation

# ===========================================
# ğŸ”„ BATCH PROCESSING
# ===========================================
BATCH_SIZE=100
# ğŸ”¢ Taille par dÃ©faut des lots de traitement
BATCH_TIMEOUT_MINUTES=30
# â° Timeout pour le traitement batch (30 minutes)
ENABLE_ASYNC_PROCESSING=true
# âœ… Activer le traitement asynchrone
BATCH_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry pour les batchs
BATCH_RETRY_DELAY=5000
# â° DÃ©lai entre les retries batch (5000ms = 5 secondes)

# ===========================================
# ğŸ“ LOGGING
# ===========================================
LOG_LEVEL=info
# ğŸ“Š Niveau de log : error | warn | info | debug
LOG_FILE_PATH=logs
# ğŸ“ Chemin des fichiers de log
LOG_MAX_SIZE=20MB
# ğŸ“ Taille maximale d'un fichier de log
LOG_MAX_FILES=14d
# ğŸ“… DurÃ©e de rÃ©tention des logs (14 jours recommandÃ©)
LOG_FORMAT=json
# ğŸ“„ Format des logs (json, text)

# Activer les logs structurÃ©s
ENABLE_STRUCTURED_LOGS=true
# ğŸ“Š Activer les logs au format JSON
ENABLE_REQUEST_LOGGING=true
# ğŸ“ Activer les logs des requÃªtes HTTP
ENABLE_GENERATION_LOGGING=true
# ğŸ« Activer les logs dÃ©taillÃ©s de gÃ©nÃ©ration

# ===========================================
# ğŸ“Š MONITORING
# ===========================================
ENABLE_METRICS=true
# ğŸ“ˆ Activer les mÃ©triques Prometheus
METRICS_PORT=9094
# ğŸšª Port pour les mÃ©triques (doit Ãªtre unique)
ENABLE_HEALTH_CHECKS=true
# âœ… Activer les health checks dÃ©taillÃ©s
ENABLE_PERFORMANCE_MONITORING=true
# ğŸ“ˆ Activer le monitoring des performances

# Health checks
HEALTH_CHECK_INTERVAL=30000
# â° Intervalle des health checks (30000ms = 30 secondes)
HEALTH_CHECK_TIMEOUT=5000
# â° Timeout des health checks (5000ms = 5 secondes)

# ===========================================
# ğŸš¦ RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
# â° FenÃªtre de temps pour le rate limiting (900000ms = 15 minutes)
RATE_LIMIT_MAX_REQUESTS=500
# ğŸ”¢ Nombre max de requÃªtes par fenÃªtre (global)
TICKET_GENERATION_RATE_LIMIT=100
# ğŸ« Limite pour la gÃ©nÃ©ration de tickets
BATCH_GENERATION_RATE_LIMIT=10
# ğŸ“¦ Limite pour la gÃ©nÃ©ration batch

# Rate limiting spÃ©cifique par endpoint
TICKET_PREVIEW_RATE_LIMIT=50
# ğŸ‘ï¸ Limite pour l'endpoint de preview
TEMPLATE_LIST_RATE_LIMIT=200
# ğŸ“‹ Limite pour la liste des templates

# ===========================================
# ğŸ“Š TICKET STATISTICS
# ===========================================
ENABLE_DETAILED_LOGGING=true
# ğŸ“Š Activer les logs dÃ©taillÃ©s pour les statistiques
STATISTICS_RETENTION_DAYS=90
# ğŸ“… DurÃ©e de rÃ©tention des statistiques (jours)
GENERATION_REPORT_ENABLED=true
# ğŸ“Š Activer le rapport de gÃ©nÃ©ration
ENABLE_REAL_TIME_STATS=true
# ğŸ“ˆ Activer les statistiques en temps rÃ©el

# ===========================================
# ğŸ›¡ï¸ ANTI-FRAUD
# ===========================================
ENABLE_DUPLICATE_CHECK=true
# âœ… Activer la dÃ©tection de doublons
MAX_TICKETS_PER_USER_PER_EVENT=10
# ğŸ”¢ Maximum de tickets par utilisateur par Ã©vÃ©nement
TICKET_NUMBER_LENGTH=8
# ğŸ”¢ Longueur du numÃ©ro de ticket
TICKET_PREFIX=EVT
# ğŸ« PrÃ©fixe pour les numÃ©ros de tickets

# Configuration anti-fraude avancÃ©e
FRAUD_DETECTION_ENABLED=true
# ğŸ›¡ï¸ Activer la dÃ©tection de fraude
SUSPICIOUS_PATTERN_DETECTION=true
# ğŸ” Activer la dÃ©tection de patterns suspects
BLACKLIST_ENABLED=false
# ğŸš« Activer la blacklist d'utilisateurs

# ===========================================
# ğŸ›¡ï¸ SÃ‰CURITÃ‰
# ===========================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:3004
# ğŸŒ Origines autorisÃ©es pour CORS (sÃ©parer par des virgules)
ENABLE_IP_WHITELIST=false
# âœ… Activer le whitelist d'IPs
ALLOWED_IPS=127.0.0.1,::1
# ğŸŒ Adresses IP autorisÃ©es (sÃ©parer par des virgules)
ENABLE_REQUEST_VALIDATION=true
# âœ… Activer la validation stricte des requÃªtes

# Configuration sÃ©curitÃ© avancÃ©e
ENABLE_RATE_LIMITING=true
# ğŸš¦ Activer le rate limiting
ENABLE_INPUT_SANITIZATION=true
# ğŸ§¹ Activer la sanitisation des entrÃ©es
ENABLE_FILE_VALIDATION=true
# âœ… Activer la validation stricte des fichiers

# ===========================================
# ğŸ§ª TESTS & DÃ‰VELOPPEMENT
# ===========================================
ENABLE_MOCK_SERVICES=false
# ğŸ§ª Activer les services mockÃ©s pour les tests
ENABLE_DEBUG_MODE=false
# ğŸ› Activer le mode debug (informations supplÃ©mentaires)
ENABLE_PERFORMANCE_PROFILING=false
# ğŸ“ˆ Activer le profiling des performances (uniquement en dev)

# Configuration de test
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/event_planner_tickets_test
# ğŸ§ª URL de la base de donnÃ©es de test
TEST_REDIS_URL=redis://localhost:6379/15
# ğŸ§ª URL Redis pour les tests
TEST_TIMEOUT=10000
# â° Timeout pour les tests (10 secondes)

# Mock configuration
MOCK_QR_GENERATION=true
# ğŸ« Mock la gÃ©nÃ©ration de QR codes en test
MOCK_PDF_GENERATION=true
# ğŸ“„ Mock la gÃ©nÃ©ration de PDF en test
MOCK_STORAGE=true
# ğŸ’¾ Mock le stockage en test
