{
	"info": {
		"_postman_id": "ticket-generator-service-collection",
		"name": "Ticket Generator Service - Technical API",
		"description": "Collection compl√®te pour Ticket Generator Service (Port 3004). Service technique de g√©n√©ration QR/PDF.\n\nüî• R√àGLE STRICTE: Service technique - PAS d'authentification utilisateur.\nLes bodies sont bas√©s sur les tests manuels valid√©s (14/14 succ√®s).\n‚úÖ Tous les endpoints test√©s et fonctionnels",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3004/api",
			"type": "string"
		},
		{
			"key": "testTicketId",
			"value": "ticket-123-abc",
			"type": "string"
		},
		{
			"key": "testEventId",
			"value": "event-456-def",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "ÔøΩ Health & Service Info",
			"item": [
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Service is healthy\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql(\"healthy\");",
									"    pm.expect(jsonData.service).to.eql(\"ticket-generator\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Service Info",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Service info retrieved\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.service).to.exist;",
									"    pm.expect(jsonData.version).to.exist;",
									"    pm.expect(jsonData.endpoints).to.exist;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets"
							]
						}
					},
					"response": []
				}
			],
			"description": "V√©rification de sant√© et informations du service"
		},
		{
			"name": "ÔøΩüé´ QR Code Generation",
			"item": [
				{
					"name": "Generate QR Code",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"QR code generated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('qr_code');",
									"    pm.expect(jsonData.data).to.have.property('format');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticketCode\": \"TICKET-CODE-123456\",\n  \"ticketId\": \"{{testTicketId}}\",\n  \"eventId\": \"{{testEventId}}\",\n  \"format\": \"base64\",\n  \"size\": \"medium\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/qr/generate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"qr",
								"generate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ticket QR Code",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Ticket QR code retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('qr_code');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets/{{testTicketId}}/qr",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"{{testTicketId}}",
								"qr"
							]
						}
					},
					"response": []
				}
			],
			"description": "G√©n√©ration et r√©cup√©ration de QR codes pour tickets"
		},
		{
			"name": "üé´ Complete Ticket Generation",
			"item": [
				{
					"name": "Generate Ticket",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Ticket generated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('ticket_id');",
									"    pm.expect(jsonData.data).to.have.property('qr_code');",
									"    pm.expect(jsonData.data).to.have.property('pdf_url');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticketData\": {\n    \"id\": \"{{testTicketId}}\",\n    \"eventId\": \"{{testEventId}}\",\n    \"userId\": \"USER-456\",\n    \"type\": \"standard\",\n    \"attendeeName\": \"Jean Dupont\",\n    \"attendeeEmail\": \"jean.dupont@email.com\",\n    \"attendeePhone\": \"+33612345678\",\n    \"eventTitle\": \"Conf√©rence Tech 2024\",\n    \"eventDate\": \"2024-06-15T10:00:00Z\",\n    \"location\": \"Paris, La D√©fense\"\n  },\n  \"options\": {\n    \"qrFormat\": \"base64\",\n    \"qrSize\": \"medium\",\n    \"pdfFormat\": true,\n    \"includeLogo\": false\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/generate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"generate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Generate Batch",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Batch generated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('batch_id');",
									"    pm.expect(jsonData.data).to.have.property('tickets_generated');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tickets\": [\n    {\n      \"id\": \"TICKET-BATCH-001\",\n      \"eventId\": \"{{testEventId}}\",\n      \"type\": \"standard\",\n      \"attendeeName\": \"Alice Martin\",\n      \"attendeeEmail\": \"alice@email.com\"\n    },\n    {\n      \"id\": \"TICKET-BATCH-002\",\n      \"eventId\": \"{{testEventId}}\",\n      \"type\": \"vip\",\n      \"attendeeName\": \"Bob Bernard\",\n      \"attendeeEmail\": \"bob@email.com\"\n    },\n    {\n      \"id\": \"TICKET-BATCH-003\",\n      \"eventId\": \"{{testEventId}}\",\n      \"type\": \"premium\",\n      \"attendeeName\": \"Caroline Petit\",\n      \"attendeeEmail\": \"caroline@email.com\"\n    }\n  ],\n  \"batchOptions\": {\n    \"qrFormat\": \"base64\",\n    \"qrSize\": \"medium\",\n    \"pdfFormat\": true,\n    \"includeLogo\": false,\n    \"parallelGeneration\": true\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/batch",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"batch"
							]
						}
					},
					"response": []
				},
				{
					"name": "Regenerate Ticket",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Ticket regenerated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('ticket_id');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Test de r√©g√©n√©ration\",\n  \"regenerateQR\": true,\n  \"regeneratePDF\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/{{testTicketId}}/regenerate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"{{testTicketId}}",
								"regenerate"
							]
						}
					},
					"response": []
				}
			],
			"description": "G√©n√©ration compl√®te de tickets avec QR code et PDF"
		},
		{
			"name": "üìÑ PDF Generation",
			"item": [
				{
					"name": "Generate PDF",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"PDF generated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('pdf_url');",
									"    pm.expect(jsonData.data).to.have.property('file_size');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticketData\": {\n    \"id\": \"{{testTicketId}}\",\n    \"eventId\": \"{{testEventId}}\",\n    \"attendeeName\": \"David Durand\",\n    \"attendeeEmail\": \"david@email.com\"\n  },\n  \"eventData\": {\n    \"id\": \"{{testEventId}}\",\n    \"name\": \"Conf√©rence Tech 2024\",\n    \"date\": \"2024-06-15T10:00:00Z\"\n  },\n  \"userData\": {\n    \"first_name\": \"David\",\n    \"last_name\": \"Durand\",\n    \"email\": \"david@email.com\",\n    \"phone\": \"+33612345678\"\n  },\n  \"options\": {\n    \"templateId\": \"default\",\n    \"pdfOptions\": {\n      \"format\": \"A4\",\n      \"orientation\": \"portrait\",\n      \"includeWatermark\": false,\n      \"customTemplate\": false\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/pdf",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"pdf"
							]
						}
					},
					"response": []
				},
				{
					"name": "Generate Batch PDF",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Batch PDF generated successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('batch_id');",
									"    pm.expect(jsonData.data).to.have.property('pdfs_generated');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tickets\": [\n    {\n      \"id\": \"TICKET-BATCHPDF-001\",\n      \"eventId\": \"{{testEventId}}\",\n      \"attendeeName\": \"Eva Lemoine\",\n      \"attendeeEmail\": \"eva@email.com\"\n    },\n    {\n      \"id\": \"TICKET-BATCHPDF-002\",\n      \"eventId\": \"{{testEventId}}\",\n      \"attendeeName\": \"Fran√ßois Moreau\",\n      \"attendeeEmail\": \"francois@email.com\"\n    }\n  ],\n  \"eventData\": {\n    \"id\": \"{{testEventId}}\",\n    \"name\": \"Conf√©rence Tech 2024\",\n    \"date\": \"2024-06-15T10:00:00Z\"\n  },\n  \"options\": {\n    \"batchOptions\": {\n      \"format\": \"A4\",\n      \"orientation\": \"portrait\",\n      \"includeWatermark\": false\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tickets/batch-pdf",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"batch-pdf"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ticket PDF",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Ticket PDF retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('pdf_url');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets/{{testTicketId}}/pdf",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"{{testTicketId}}",
								"pdf"
							]
						}
					},
					"response": []
				}
			],
			"description": "G√©n√©ration de PDFs pour tickets individuels et en lot"
		},
		{
			"name": "üìã Ticket Information",
			"item": [
				{
					"name": "Get Ticket Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Ticket details retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('ticket_id');",
									"    pm.expect(jsonData.data).to.have.property('generation_status');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets/{{testTicketId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"{{testTicketId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Event Tickets",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Event tickets retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/tickets/event/{{testEventId}}?status=generated&limit=50",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tickets",
								"event",
								"{{testEventId}}"
							],
							"query": [
								{
									"key": "status",
									"value": "generated"
								},
								{
									"key": "limit",
									"value": "50"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "R√©cup√©ration des informations sur les tickets g√©n√©r√©s"
		},
		{
			"name": "üîÑ Queue Management",
			"item": [
				{
					"name": "Get Queue Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Queue status retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('queue_size');",
									"    pm.expect(jsonData.data).to.have.property('processing_rate');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/queues/status",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"queues",
								"status"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Job Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Job status retrieved successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('job_id');",
									"    pm.expect(jsonData.data).to.have.property('status');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/queues/job/job-123-abc",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"queues",
								"job",
								"job-123-abc"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Job cancelled successfully\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/queues/job/job-123-abc",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"queues",
								"job",
								"job-123-abc"
							]
						}
					},
					"response": []
				}
			],
			"description": "Gestion des files d'attente et des jobs de g√©n√©ration"
		}
	]
}
